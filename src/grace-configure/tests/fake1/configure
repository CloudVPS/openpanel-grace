#!/bin/sh
# ===========================================================================
# Configure script generated by tina
# ===========================================================================

# ---------------------------------------------------------------------------
# Solaris' /bin/sh uses a braindead builtin echo, circumvent
# ---------------------------------------------------------------------------

TEST=`echo -n ""`
if [ -z "$TEST" ]; then
  ECHON="echo -n"
  NNL=""
else
  ECHON="/usr/bin/echo"
  NNL="\c"
fi

# ---------------------------------------------------------------------------
# Parse command line arguments
# ---------------------------------------------------------------------------

usage ()
{
  cat << EOF
Usage: $0 [-q]
EOF
  exit 1
}
QUIET=0

while getopts "q" opt; do
  case $opt in

  q) QUIET=1 ;;
  esac
done

# ---------------------------------------------------------------------------
# Provide a bunch of useful tools to our snippets
# ---------------------------------------------------------------------------

saypending ()
{
  if [ $QUIET = 1 ]; then
    PENDING=$1
  else
    $ECHON "$1: $NNL"
  fi
}

saypass ()
{
  if [ $QUIET = 1 ]; then
    : # nothing
  else
    echo "$1"
  fi
}

sayfail ()
{
  if [ $QUIET = 1 ]; then
    echo "$PENDING: $1" >&2
    exit 1
  else
    echo "$1"
  fi
}

# ---------------------------------------------------------------------------
# Fake success
# ---------------------------------------------------------------------------

saypending "faking success"
LIBFAKE=ohyeah
FAKE_TYPEDEF="#define FAKE FAKE"
saypass "yes"
# ---------------------------------------------------------------------------
# Create the makeinclude file
# ---------------------------------------------------------------------------

saypending "creating makeinclude"

DATE=`date`

cat >makeinclude <<EOF
# Makeinclude generated by configure: $DATE

LIBS = $LIBFAKE
EOF

saypass "done"
# ---------------------------------------------------------------------------
# Create the platform.h file
# ---------------------------------------------------------------------------

saypending "creating platform.h"

cat >platform.h <<EOF
#ifndef _PLATFORM_H
#define _PLATFORM_H
$FAKE_TYPEDEF
#endif
EOF

saypass "done"
if [ -f configure.log ]; then rm -f configure.log; fi

