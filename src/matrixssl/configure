#!/bin/sh
# ===========================================================================
# Configure script generated by tina
# ===========================================================================

# ---------------------------------------------------------------------------
# Solaris' /bin/sh uses a braindead builtin echo, circumvent
# ---------------------------------------------------------------------------

TEST=`echo -n ""`
if [ -z "$TEST" ]; then
  ECHON="echo -n"
  NNL=""
else
  ECHON="/usr/bin/echo"
  NNL="\c"
fi


# ---------------------------------------------------------------------------
# Figure out ranlib
# ---------------------------------------------------------------------------

$ECHON "looking for ranlib: $NNL"
RANLIB=`which ranlib 2>/dev/null`
if [ ! -f "$RANLIB" ]; then
  RANLIB=""
fi

if [ -z "$RANLIB" ]; then
  RANLIB="echo"
  echo "n/a"
else
  echo "found"
  RANLIB="ranlib"
fi
# ---------------------------------------------------------------------------
# Create the makeinclude file
# ---------------------------------------------------------------------------

$ECHON "creating makeinclude: $NNL"

DATE=`date`

cat >makeinclude <<EOF
# Makeinclude generated by configure: $DATE

CXX = $CXX
CXXFLAGS = $CXXFLAGS
LD = $LD
LDFLAGS = $LDFLAGS
LDL = $LIBDL
LIBS = $LIBPTHREAD $LIBDL $LIBSOCKET $LIBNSL $LIBCRYPT
LPTHREAD = $LIBPTHREAD
LSOCKET = $LIBSOCKET $LIBNSL
RANLIB = $RANLIB
RDYNAMIC = $RDYNAMIC
SHARED = $SHARED
EOF

echo "done"
# ---------------------------------------------------------------------------
# Create the platform.h file
# ---------------------------------------------------------------------------

$ECHON "creating platform.h: $NNL"

cat >platform.h <<EOF
#ifndef _PLATFORM_H
#define _PLATFORM_H

$CTIME_R_DEFINE
$CTIME_R_PTHREAD_DEFINE
$CTIME_R_XOPEN_DEFINE
$CTIME_R_XPG_DEFINE
$CTIME_R_INCLUDE
$PTHREAD_HAVE_RWLOCK
$PTHREAD_HAVE_TIMEDLOCK$SOCKLEN_TYPEDEF
$CRYPTH
$CRYPTDEFINE
$HAVE_GMTOFF
$HAVE_SENDFILE
$HAVE_PASSCRED
#endif
EOF

echo "done"
if [ -f configure.log ]; then rm -f configure.log; fi

